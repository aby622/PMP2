/**
 * PMP2, WS 2015/16
 * Gruppe: Jannes Volkens (jannes.volkens@haw-hamburg.de),
 * Leon Schlichting (leon.schlichting@haw-hamburg.de)
 * Aufgabe: Aufgabenblatt 2, Aufgabe 3
 */
package aufgabenblatt2;

public class Rennauto extends Thread implements Comparable<Rennauto> {
  private double streckenlaenge;
  private double streckenlaenge1 = 0.0;
  private double zeit;
  private String name;

  public Rennauto(String name, double streckenlaenge) {
	this.name = name;
	this.streckenlaenge = streckenlaenge;
  }

  public double getZeit() {
	return zeit;
  }

  public String getNames() {
	return name;
  }

  @Override
  public void run() {
	while (!isInterrupted()) {
	  long geschwindigkeit = (long) (Math.random() * 400 + 800);
	  zeit += geschwindigkeit;
	  streckenlaenge1++;

	  System.err.println(name + ": " + streckenlaenge1 + "/10.0");

	  if (streckenlaenge1 == streckenlaenge) {
		interrupt();
	  }

	  try {
		Thread.sleep(geschwindigkeit);
	  } catch (InterruptedException e) {
		try {
		  Thread.sleep(2000);
		  interrupt();
		  zeit = zeit / 1000;
		  zeit = Math.round(10.0 * zeit) / 10.0;
		} catch (InterruptedException e1) {
		  e1.printStackTrace();
		}
	  }
	}
  }

  @Override
  public int compareTo(Rennauto auto) {
	if(getZeit() <= auto.getZeit()){
	  return 1;
	}
	if(getZeit() == auto.getZeit()){
	  return 0;
	}
	if(getZeit() >= auto.getZeit()){
	  return -1;
	}
	return (int)0;
  }
}
