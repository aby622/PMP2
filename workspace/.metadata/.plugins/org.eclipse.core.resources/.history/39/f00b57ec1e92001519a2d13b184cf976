package aufgabenblatt3;

import java.util.HashMap;
import java.util.function.BinaryOperator;

public class Rangierbahnhof {

  public int anzahlGleise = 3;

  private Zug[] zuege = new Zug[2];

  private HashMap<Operation, BinaryOperator<Zug[]>> gleise = new HashMap<Operation, BinaryOperator<Zug[]>>();

  public enum Operation {
	EINFAHREN, AUSFAHREN
  }

  public Rangierbahnhof() {
	gleise.put(Operation.EINFAHREN,(a, b)-> a.);
	gleise.put(Operation.AUSFAHREN, a -> zuege);
  }

  public synchronized int ausfahren(Operation operator, int quelle) {
	while (anzahlGleise != zuege.length) {
	  try {
		this.wait();
	  } catch (InterruptedException e) {
		Thread.currentThread().interrupt();
	  }

	}
	return gleise.get(operator).apply( quelle);
  }

  public synchronized int einfahren(Operation operator, int ziel) {
	while (anzahlGleise != zuege.length) {
	  try {
		this.wait();
	  } catch (InterruptedException e) {
		Thread.currentThread().interrupt();
	  }

	}
	return gleise.get(operator).apply(ziel);
  }
}
